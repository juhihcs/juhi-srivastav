{% liquid
  assign widths = '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840'
  assign sizes_top = '100vw'
  assign sizes_bottom = '(min-width: 990px) 60vw, 100vw'

  assign fetch_priority = 'auto'
  if section.index == 1
    assign fetch_priority = 'high'
  endif

  assign alpha = section.settings.overlay_color.alpha
  assign show_overlay = false
  if section.settings.toggle_overlay and alpha > 0
    assign show_overlay = true
  endif
%}

<div
  id="CustomHero-{{ section.id }}"
  class="custom-hero color-{{ section.settings.color_scheme }}"
  {% if request.visual_preview_mode %}
    data-shopify-visual-preview
  {% endif %}
>
  <div class="custom-hero__container">
    
    <!-- Top Image (Hidden on Mobile) -->
    {% if section.settings.top_image != blank %}
      <div class="custom-hero__top-image">
        {% if show_overlay %}
          <div class="custom-hero__overlay" style="background-color: {{ section.settings.overlay_color }};"></div>
        {% endif %}
        {{
          section.settings.top_image
          | image_url: width: 3840
          | image_tag:
            width: section.settings.top_image.width,
            widths: widths,
            height: section.settings.top_image.height,
            alt: section.settings.top_image.alt,
            class: 'custom-hero__image',
            sizes: sizes_top,
            fetchpriority: fetch_priority
        }}
      </div>
    {% else %}
      <div class="custom-hero__top-image">
        {% if show_overlay %}
          <div class="custom-hero__overlay" style="background-color: {{ section.settings.overlay_color }};"></div>
        {% endif %}
        {{ 'hero-apparel-1' | placeholder_svg_tag: 'custom-hero__image' }}
      </div>
    {% endif %}

    <!-- Bottom Section -->
    <div class="custom-hero__bottom-section">
      
      <!-- Text Area (40% on Desktop) -->
      <div class="custom-hero__text-area">
        <div class="custom-hero__content">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'heading' %}
                <h{{ block.settings.heading_size }} class="custom-hero__heading" {{ block.shopify_attributes }}>
                  {{ block.settings.heading }}
                </h{{ block.settings.heading_size }}>
              
              {% when 'text' %}
                <div class="custom-hero__text" {{ block.shopify_attributes }}>
                  {{ block.settings.text }}
                </div>
              
              {% when 'button' %}
                {% if block.settings.button_label != blank %}
                  <div class="custom-hero__button-wrapper" {{ block.shopify_attributes }}>
                    {% if block.settings.button_link != blank %}
                      <a href="{{ block.settings.button_link }}" class="button button--{{ block.settings.button_style }}">
                        {{ block.settings.button_label }}
                      </a>
                    {% else %}
                      <button class="button button--{{ block.settings.button_style }}">
                        {{ block.settings.button_label }}
                      </button>
                    {% endif %}
                  </div>
                {% endif %}

              {% when 'spacer' %}
                <div class="custom-hero__spacer" style="height: {{ block.settings.height }}px;" {{ block.shopify_attributes }}></div>

            {% endcase %}
          {% endfor %}
        </div>
      </div>

      <!-- Right Image (60% on Desktop) -->
      <div class="custom-hero__right-image">
        {% if show_overlay %}
          <div class="custom-hero__overlay" style="background-color: {{ section.settings.overlay_color }};"></div>
        {% endif %}
        {% if section.settings.bottom_image != blank %}
          {{
            section.settings.bottom_image
            | image_url: width: 3840
            | image_tag:
              width: section.settings.bottom_image.width,
              widths: widths,
              height: section.settings.bottom_image.height,
              alt: section.settings.bottom_image.alt,
              class: 'custom-hero__image',
              sizes: sizes_bottom,
              fetchpriority: fetch_priority
          }}
        {% else %}
          {{ 'hero-apparel-2' | placeholder_svg_tag: 'custom-hero__image' }}
        {% endif %}
      </div>

    </div>
  </div>
</div>

{% stylesheet %}
  .custom-hero {
    position: relative;
    width: 100%;
  }

  .custom-hero__container {
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  /* Top Image Styles */
  .custom-hero__top-image {
    position: relative;
    width: 100%;
    height: 40vh;
    min-height: 300px;
    overflow: hidden;
    display: block;
  }

  .custom-hero__top-image .custom-hero__image,
  .custom-hero__top-image svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  /* Bottom Section Styles */
  .custom-hero__bottom-section {
    display: flex;
    flex-direction: column;
    width: 100%;
    min-height: 60vh;
  }

  /* Text Area Styles */
  .custom-hero__text-area {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    background-color: rgb(var(--color-background));
    order: 2;
  }

  .custom-hero__content {
    max-width: 100%;
    text-align: center;
  }

  .custom-hero__heading {
    margin: 0 0 1rem 0;
    color: rgb(var(--color-foreground));
  }

  .custom-hero__text {
    margin: 0 0 1.5rem 0;
    color: rgb(var(--color-foreground));
  }

  .custom-hero__text p {
    margin: 0 0 1rem 0;
  }

  .custom-hero__button-wrapper {
    margin-top: 1.5rem;
  }

  .custom-hero__spacer {
    width: 100%;
  }

  /* Right Image Styles */
  .custom-hero__right-image {
    position: relative;
    width: 100%;
    height: 50vh;
    min-height: 400px;
    overflow: hidden;
    order: 1;
  }

  .custom-hero__right-image .custom-hero__image,
  .custom-hero__right-image svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  /* Overlay Styles */
  .custom-hero__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
  }

  /* Mobile Styles */
  @media screen and (max-width: 989px) {
    /* Hide top image on mobile */
    .custom-hero__top-image {
      display: none;
    }

    .custom-hero__bottom-section {
      min-height: 100vh;
    }

    .custom-hero__text-area {
      order: 1;
      flex: 1;
      min-height: 50vh;
    }

    .custom-hero__right-image {
      order: 2;
      height: 50vh;
    }
  }

  /* Desktop Styles */
  @media screen and (min-width: 990px) {
    .custom-hero__bottom-section {
      flex-direction: row;
      min-height: 60vh;
    }

    .custom-hero__text-area {
      width: 40%;
      flex: 0 0 40%;
      order: 1;
      padding: 3rem;
    }

    .custom-hero__content {
      text-align: left;
      max-width: 100%;
    }

    .custom-hero__right-image {
      width: 60%;
      flex: 0 0 60%;
      height: auto;
      min-height: 60vh;
      order: 2;
    }
  }

  /* Large Desktop Styles */
  @media screen and (min-width: 1200px) {
    .custom-hero__text-area {
      padding: 4rem;
    }

    .custom-hero__top-image {
      height: 45vh;
    }

    .custom-hero__bottom-section {
      min-height: 65vh;
    }

    .custom-hero__right-image {
      min-height: 65vh;
    }
  }

  /* Button Styles */
  .button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 1rem 2rem;
    border: none;
    border-radius: 0.25rem;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    cursor: pointer;
    font-size: 1rem;
    line-height: 1.2;
  }

  .button--primary {
    background-color: rgb(var(--color-button));
    color: rgb(var(--color-button-text));
  }

  .button--primary:hover {
    background-color: rgb(var(--color-button) / 0.8);
  }

  .button--secondary {
    background-color: transparent;
    color: rgb(var(--color-foreground));
    border: 2px solid rgb(var(--color-foreground));
  }

  .button--secondary:hover {
    background-color: rgb(var(--color-foreground));
    color: rgb(var(--color-background));
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Custom Hero Section",
  "tag": "section",
  "class": "custom-hero-wrapper section-wrapper",
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Welcome to our store"
        },
        {
          "type": "select",
          "id": "heading_size",
          "label": "Heading size",
          "options": [
            {
              "value": "1",
              "label": "H1"
            },
            {
              "value": "2",
              "label": "H2"
            },
            {
              "value": "3",
              "label": "H3"
            }
          ],
          "default": "1"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Discover our amazing collection of products</p>"
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button style",
          "options": [
            {
              "value": "primary",
              "label": "Primary"
            },
            {
              "value": "secondary",
              "label": "Secondary"
            }
          ],
          "default": "primary"
        }
      ]
    },
    {
      "type": "spacer",
      "name": "Spacer",
      "settings": [
        {
          "type": "range",
          "id": "height",
          "label": "Height",
          "min": 10,
          "max": 100,
          "step": 5,
          "unit": "px",
          "default": 20
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "top_image",
      "label": "Top image (hidden on mobile)"
    },
    {
      "type": "image_picker",
      "id": "bottom_image",
      "label": "Bottom right image"
    },
    {
      "type": "header",
      "content": "Appearance"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "toggle_overlay",
      "label": "Add image overlay",
      "default": false
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Overlay color",
      "alpha": true,
      "default": "#00000026"
    }
  ],
  "presets": [
    {
      "name": "Custom Hero Section",
      "blocks": [
        {
          "type": "heading",
          "settings": {
            "heading": "New Collection",
            "heading_size": "1"
          }
        },
        {
          "type": "text",
          "settings": {
            "text": "<p>Discover our latest arrivals and find your perfect style</p>"
          }
        },
        {
          "type": "button",
          "settings": {
            "button_label": "Shop Now",
            "button_style": "primary"
          }
        }
      ]
    }
  ]
}
{% endschema %}